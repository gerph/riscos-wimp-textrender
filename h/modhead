/* Generated by CMunge 0.84 (23 Sep 2025)
 * CMunge Copyright (c) 1999-2025 Robin Watts/Gerph */

#ifndef _CMUNGE_WimpTextRender_H_
#define _CMUNGE_WimpTextRender_H_

#include "kernel.h"

#define CMUNGE_VERSION (84)
#define CMHG_VERSION   (531) /* Nearest equivalent version */

#define Module_Title		"WimpTextRender"
#define Module_Help		"WimpTextRender"
#define Module_VersionString	"0.01"
#define Module_VersionNumber	1
#ifndef Module_Date
#define Module_Date		"22 Feb 2026"
#endif

#ifdef __cplusplus
extern "C" {
#endif


/***************************************************************************
 * Function:     Mod_Init
 * Description:  Initialise the module, setting up vectors, callbacks and
 *               any other parts of the system necessary for the module to
 *               function.
 * Parameters:   tail        = pointer to command line (control terminated)
 *               podule_base = address of podule module was started from, or
 *                             NULL if none
 *               pw          = private word for module
 * On exit:      Return NULL for successful initialisation, or a pointer to
 *               an error block if the module could not start properly.
 **************************************************************************/
_kernel_oserror *Mod_Init(const char *tail, int podule_base, void *pw);


/***************************************************************************
 * Function:     Mod_Final
 * Description:  Finalise the module, shutting down any systems necessary,
 *               freeing vectors and releasing workspace
 * Parameters:   fatal       = fatality indicator; 1 if fatal, 0 if
 *                             reinitialising
 *               podule_base = address of podule module was started from, or
 *                             NULL if none
 *               pw          = private word for module
 * On exit:      Return 0 for successful finalisation, or a pointer to an
 *               error block if module was not shutdown properly.
 **************************************************************************/
_kernel_oserror *Mod_Final(int fatal, int podule_base, void *pw);


/***************************************************************************
 * Description:  SWI handler routine. All SWIs for this module will be
 *               passed to these routines.
 * Parameters:   number = SWI number within SWI chunk (i.e. 0 to 63)
 *               r      = pointer to register block on entry
 *               pw     = private word for module
 * On exit:      Return NULL if SWI handled successfully, setting return
 *               register values (r0-r9) in r.
 *               Return error_BAD_SWI for out of range SWIs.
 *               Return an error block for a custom error.
 **************************************************************************/
/* Functions called to handle particular SWI calls */
_kernel_oserror *SWI_TextOp(int number, _kernel_swi_regs *r, void *pw);
_kernel_oserror *SWI_SetTextColour(int number, _kernel_swi_regs *r,
                                   void *pw);
_kernel_oserror *SWI_SetFontColours(int number, _kernel_swi_regs *r,
                                    void *pw);
_kernel_oserror *SWI_ReadSysInfo(int number, _kernel_swi_regs *r, void *pw);
/* SWI number definitions */
#define WimpTextRender_00 (0x000c0880)
#undef WimpTextRender_TextOp
#undef XWimpTextRender_TextOp
#define WimpTextRender_TextOp     (0x000c0880)
#define XWimpTextRender_TextOp    (0x000e0880)
#undef WimpTextRender_SetTextColour
#undef XWimpTextRender_SetTextColour
#define WimpTextRender_SetTextColour  (0x000c0881)
#define XWimpTextRender_SetTextColour (0x000e0881)
#undef WimpTextRender_SetFontColours
#undef XWimpTextRender_SetFontColours
#define WimpTextRender_SetFontColours  (0x000c0882)
#define XWimpTextRender_SetFontColours (0x000e0882)
#undef WimpTextRender_ReadSysInfo
#undef XWimpTextRender_ReadSysInfo
#define WimpTextRender_ReadSysInfo  (0x000c0883)
#define XWimpTextRender_ReadSysInfo (0x000e0883)

/* Special error for 'SWI values out of range for this module' */
#define error_BAD_SWI ((_kernel_oserror *) -1)

/* Error base for this module */
#define ERROR_BASE (0x00840000)
/* Error messages embedded in the module header, based at &840000 */
#if defined(__riscos64) /* RISC OS 64bit build with GCC */
/* Data is in the .rodata section, so is accessed directly */
extern _kernel_oserror __err_err_NotImplemented; /* &840000 */
extern _kernel_oserror __err_err_BufferOverflow; /* &1e4 */

#define err_NotImplemented (&__err_err_NotImplemented)
#define err_BufferOverflow (&__err_err_BufferOverflow)
#elif defined(__GNUC__) /* RISC OS 32bit build with GCC */
extern void __err_err_NotImplemented(void); /* &840001 */
extern void __err_err_BufferOverflow(void); /* &1e4 */

#define err_NotImplemented ((_kernel_oserror*)(void *)__err_err_NotImplemented)
#define err_BufferOverflow ((_kernel_oserror*)(void *)__err_err_BufferOverflow)
#else /* Norcroft */
extern void __err_err_NotImplemented(void); /* &840002 */
extern void __err_err_BufferOverflow(void); /* &1e4 */

#define err_NotImplemented ((_kernel_oserror*)(int)__err_err_NotImplemented)
#define err_BufferOverflow ((_kernel_oserror*)(int)__err_err_BufferOverflow)
#endif

#ifdef __cplusplus
}
#endif

#endif
